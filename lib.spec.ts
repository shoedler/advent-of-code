import { Hashmap } from "./lib";

describe(Hashmap.name, () => {
  it("should work", () => {
    // Arrange
    const map = new Hashmap<number, string>();

    // Act
    map.put(1, "one");
    map.put(2, "two");
    map.put(3, "three");

    // Assert
    expect(map.has(1)).toBe(true);
    expect(map.has(2)).toBe(true);
    expect(map.has(3)).toBe(true);
    expect(map.has(4)).toBe(false);
    expect(map.get(1)).toBe("one");
    expect(map.get(2)).toBe("two");
    expect(map.get(3)).toBe("three");
    expect(map.get(4)).toBe(undefined);
    expect(map.items()).toEqual([
      [1, "one"],
      [2, "two"],
      [3, "three"],
    ]);
    expect(map.size()).toBe(3);
  });

  it("should be fast", () => {
    // Arrange
    const map = new Hashmap<number, string>();
    const input = [
      ...words,
      ...reverseArray(words),
      ...stripFirstCharOfStringArray(words),
      ...reverseArray(stripFirstCharOfStringArray(words)),
      ...stripFirstCharOfStringArray(stripFirstCharOfStringArray(words)),
      ...reverseArray(
        stripFirstCharOfStringArray(stripFirstCharOfStringArray(words))
      ),
      ...stripFirstCharOfStringArray(
        stripFirstCharOfStringArray(stripFirstCharOfStringArray(words))
      ),
      ...reverseArray(
        stripFirstCharOfStringArray(
          stripFirstCharOfStringArray(stripFirstCharOfStringArray(words))
        )
      ),
    ];

    // Act
    const start = performance.now();
    input.forEach((word, i) => map.put(i, word));
    const end = performance.now();

    // Assert
    console.log(`Hashmap: ${end - start}ms`);
    expect(end - start).toBeLessThan(1000);
  });
});

const stripFirstCharOfStringArray = (arr: string[]): string[] =>
  arr.map((str) => str.slice(1));

const reverseArray = <T>(arr: T[]): T[] => {
  const result: T[] = [];
  for (let i = arr.length - 1; i >= 0; i--) {
    result.push(arr[i]);
  }
  return result;
};

const words = [
  "push",
  "wire",
  "quiet",
  "scale",
  "alarm",
  "acoustics",
  "glamorous",
  "strong",
  "fry",
  "mitten",
  "action",
  "steadfast",
  "fact",
  "snakes",
  "fluffy",
  "van",
  "crack",
  "periodic",
  "common",
  "disillusioned",
  "kittens",
  "chase",
  "yellow",
  "queen",
  "horses",
  "absurd",
  "abortive",
  "love",
  "nod",
  "soak",
  "offend",
  "likeable",
  "hissing",
  "harm",
  "jumpy",
  "lethal",
  "kiss",
  "placid",
  "great",
  "best",
  "walk",
  "dashing",
  "wrench",
  "star",
  "shade",
  "taboo",
  "exercise",
  "meeting",
  "redundant",
  "owe",
  "secretive",
  "aromatic",
  "stain",
  "deliver",
  "appreciate",
  "expect",
  "puncture",
  "thirsty",
  "puny",
  "relation",
  "meat",
  "clean",
  "knot",
  "brush",
  "left",
  "irate",
  "throne",
  "idiotic",
  "collar",
  "damaging",
  "educated",
  "scorch",
  "legal",
  "fasten",
  "monkey",
  "activity",
  "bake",
  "handsome",
  "mundane",
  "identify",
  "park",
  "sad",
  "clover",
  "license",
  "black-and-white",
  "memory",
  "lyrical",
  "card",
  "black",
  "ten",
  "quickest",
  "fax",
  "mass",
  "industry",
  "damaged",
  "cagey",
  "comfortable",
  "school",
  "mighty",
  "electric",
  "woebegone",
  "house",
  "bruise",
  "edge",
  "vein",
  "meddle",
  "whispering",
  "repeat",
  "superb",
  "many",
  "sudden",
  "wilderness",
  "insidious",
  "hard-to-find",
  "ill-fated",
  "fumbling",
  "discovery",
  "accessible",
  "fog",
  "knowing",
  "drag",
  "influence",
  "pear",
  "sparkling",
  "noxious",
  "like",
  "regret",
  "salt",
  "spurious",
  "describe",
  "excuse",
  "smoke",
  "serve",
  "form",
  "mindless",
  "camera",
  "overrated",
  "cold",
  "oatmeal",
  "suffer",
  "children",
  "dangerous",
  "ritzy",
  "sore",
  "brass",
  "donkey",
  "future",
  "oval",
  "untidy",
  "bang",
  "behavior",
  "innocent",
  "market",
  "power",
  "lame",
  "unsuitable",
  "fierce",
  "scent",
  "enjoy",
  "snore",
  "drab",
  "degree",
  "name",
  "purring",
  "perpetual",
  "chief",
  "search",
  "page",
  "husky",
  "heavy",
  "way",
  "committee",
  "curved",
  "apparatus",
  "elderly",
  "tax",
  "tranquil",
  "pale",
  "mushy",
  "sheep",
  "panicky",
  "jellyfish",
  "hands",
  "wing",
  "earthquake",
  "thick",
  "picture",
  "tap",
  "glistening",
  "stiff",
  "overwrought",
  "decide",
  "boast",
  "bumpy",
  "responsible",
  "purple",
  "wary",
  "miss",
  "burst",
  "lean",
  "uncle",
  "separate",
  "treatment",
  "beautiful",
  "basket",
  "rub",
  "frogs",
  "encouraging",
  "discreet",
  "direful",
  "correct",
  "coat",
  "able",
  "bubble",
  "confess",
  "swift",
  "reject",
  "needle",
  "shock",
  "amusing",
  "price",
  "awesome",
  "announce",
  "yoke",
  "value",
  "thoughtless",
  "cent",
  "humdrum",
  "barbarous",
  "argument",
  "dazzling",
  "help",
  "dependent",
  "profit",
  "gorgeous",
  "fortunate",
  "lonely",
  "admit",
  "special",
  "skate",
  "ossified",
  "resolute",
  "impolite",
  "scream",
  "stocking",
  "voyage",
  "hapless",
  "zealous",
  "top",
  "tumble",
  "volcano",
  "sweltering",
  "moaning",
  "apparel",
  "start",
  "elated",
  "retire",
  "direction",
  "vague",
  "prickly",
  "amuse",
  "faint",
  "debt",
  "rustic",
  "cheat",
  "race",
  "resonant",
  "necessary",
  "detect",
  "cherries",
  "condemned",
  "holistic",
  "view",
  "rabid",
  "zinc",
  "cure",
  "aspiring",
  "room",
  "bridge",
  "abounding",
  "plucky",
  "compare",
  "majestic",
  "plastic",
  "thread",
  "furtive",
  "act",
  "interesting",
  "ethereal",
  "false",
  "quartz",
  "half",
  "cracker",
  "dislike",
  "cheese",
  "trot",
  "better",
  "belligerent",
  "desk",
  "dysfunctional",
  "calculator",
  "two",
  "taste",
  "face",
  "eggnog",
  "inquisitive",
  "fence",
  "hall",
  "funny",
  "few",
  "obeisant",
  "receptive",
  "creator",
  "rejoice",
  "expand",
  "friend",
  "flowery",
  "worry",
  "laborer",
  "thing",
  "magenta",
  "side",
  "imperfect",
  "thoughtful",
  "plan",
  "story",
  "motionless",
  "memorize",
  "prose",
  "suspend",
  "hand",
  "pedal",
  "hot",
  "flesh",
  "naive",
  "repair",
  "satisfy",
  "incandescent",
  "apologise",
  "yard",
  "bath",
  "realize",
  "statement",
  "punish",
  "interfere",
  "reflect",
  "light",
  "grease",
  "dead",
  "iron",
  "basketball",
  "afterthought",
  "fine",
  "company",
  "murky",
  "vigorous",
  "historical",
  "lunchroom",
  "trucks",
  "festive",
  "decision",
  "range",
  "thaw",
  "sail",
  "sturdy",
  "rescue",
  "church",
  "flavor",
  "approval",
  "growth",
  "unkempt",
  "flowers",
  "rough",
  "anger",
  "crime",
  "hang",
  "disagreeable",
  "tow",
  "uttermost",
  "maniacal",
  "rely",
  "puzzling",
  "cautious",
  "jelly",
  "homeless",
  "mellow",
  "proud",
  "railway",
  "behave",
  "giants",
  "soup",
  "hole",
  "size",
  "same",
  "continue",
  "control",
  "air",
  "warlike",
  "jolly",
  "squirrel",
  "eight",
  "hurry",
  "radiate",
  "overflow",
  "wind",
  "powder",
  "shame",
  "remember",
  "rinse",
  "grain",
  "cool",
  "nice",
  "number",
  "division",
  "macho",
  "bucket",
  "thumb",
  "wax",
  "lazy",
  "dance",
  "itchy",
  "unit",
  "clumsy",
  "earn",
  "hammer",
  "moldy",
  "advise",
  "bored",
  "things",
  "veil",
  "grip",
  "incompetent",
  "signal",
  "arrive",
  "questionable",
  "laugh",
  "utopian",
  "deeply",
  "equable",
  "perfect",
  "torpid",
  "intelligent",
  "squash",
  "file",
  "beginner",
  "quizzical",
  "cooing",
  "grade",
  "last",
  "connect",
  "comparison",
  "obsolete",
  "chance",
  "juice",
  "pass",
  "windy",
  "useless",
  "evasive",
  "succinct",
  "meaty",
  "accidental",
  "afford",
  "married",
  "complete",
  "feeble",
  "deadpan",
  "ill",
  "high",
  "alcoholic",
  "regular",
  "button",
  "concern",
  "uninterested",
  "press",
  "premium",
  "flashy",
  "engine",
  "shiny",
  "ice",
  "moon",
  "bomb",
  "dispensable",
  "quaint",
  "economic",
  "greedy",
  "shirt",
  "prepare",
  "fetch",
  "pump",
  "day",
  "point",
  "delicious",
  "yell",
  "abject",
  "rapid",
  "harbor",
  "temper",
  "defiant",
  "abiding",
  "scrub",
  "trick",
  "quilt",
  "well-made",
  "branch",
  "complex",
  "bottle",
  "fluttering",
  "aboard",
  "outstanding",
  "vest",
  "symptomatic",
  "scandalous",
  "spiky",
  "hover",
  "spoil",
  "spark",
  "spell",
  "divergent",
  "work",
  "produce",
  "gigantic",
  "weight",
  "assorted",
  "glossy",
  "various",
  "youthful",
  "fly",
  "representative",
  "lick",
  "shelf",
  "billowy",
  "ugly",
  "grape",
  "milk",
  "dust",
  "support",
  "delight",
  "part",
  "cake",
  "ear",
  "productive",
  "unused",
  "malicious",
  "angle",
  "snobbish",
  "dynamic",
  "existence",
  "explode",
  "bow",
  "oceanic",
  "smart",
  "ashamed",
  "bat",
  "hesitant",
  "snotty",
  "mere",
  "berry",
  "crowded",
  "interest",
  "staking",
  "huge",
  "develop",
  "sweet",
  "tricky",
  "arm",
  "event",
  "dress",
  "amusement",
  "bag",
  "notebook",
  "trees",
  "spray",
  "government",
  "pause",
  "note",
  "cry",
  "hulking",
  "oven",
  "fail",
  "aback",
  "examine",
  "telling",
  "possess",
  "stitch",
  "beds",
  "second-hand",
  "analyze",
  "mouth",
  "violent",
  "fix",
  "loud",
  "straw",
  "brake",
  "lewd",
  "blind",
  "dam",
  "reply",
  "gabby",
  "type",
  "visit",
  "exuberant",
  "peel",
  "unequal",
  "weather",
  "instrument",
  "valuable",
  "border",
  "save",
  "actually",
  "wanting",
  "bird",
  "rainstorm",
  "fast",
  "wide",
  "obsequious",
  "cakes",
  "jealous",
  "lettuce",
  "stream",
  "tail",
  "supreme",
  "stay",
  "science",
  "bed",
  "ablaze",
  "hateful",
  "physical",
  "talk",
  "match",
  "glass",
  "even",
  "gentle",
  "remove",
  "pie",
  "discover",
  "dream",
  "colorful",
  "oranges",
  "icy",
  "rhetorical",
  "rhythm",
  "animal",
  "shrill",
  "party",
  "frog",
  "puffy",
  "vengeful",
  "plain",
  "command",
  "subdued",
  "habitual",
  "ray",
  "shave",
  "boundless",
  "kitty",
  "descriptive",
  "childlike",
  "grass",
  "spring",
  "plate",
  "secret",
  "stick",
  "eager",
  "unadvised",
  "drum",
  "screw",
  "classy",
  "paste",
  "detailed",
  "paper",
  "crooked",
  "simplistic",
  "breakable",
  "settle",
  "structure",
  "righteous",
  "shy",
  "creepy",
  "thought",
  "middle",
  "smile",
  "red",
  "hollow",
  "important",
  "rabbit",
  "juggle",
  "instinctive",
  "melted",
  "tough",
  "pinch",
  "stare",
  "ludicrous",
  "volleyball",
  "north",
  "soda",
  "muddle",
  "preserve",
  "wriggle",
  "gainful",
  "observe",
  "nonstop",
  "blue",
  "cheap",
  "suck",
  "undress",
  "permit",
  "sugar",
  "trail",
  "sort",
  "meal",
  "shivering",
  "jog",
  "cross",
  "girl",
  "cloth",
  "enthusiastic",
  "giant",
  "nosy",
  "crook",
  "merciful",
  "stranger",
  "sick",
  "health",
  "whole",
  "skirt",
  "steep",
  "misty",
  "scare",
  "absorbed",
  "hunt",
  "slap",
  "kick",
  "locket",
  "print",
  "lying",
  "store",
  "horse",
  "fall",
  "arithmetic",
  "root",
  "joyous",
  "afraid",
  "chickens",
  "lunch",
  "cynical",
  "cabbage",
  "attempt",
  "guess",
  "nail",
  "smooth",
  "tray",
  "ruin",
  "wine",
  "honorable",
  "phobic",
  "debonair",
  "stir",
  "baseball",
  "interrupt",
  "flawless",
  "letters",
  "splendid",
  "gate",
  "smell",
  "ambitious",
  "zesty",
  "supply",
  "frail",
  "frightened",
  "godly",
  "colour",
  "enchanted",
  "destroy",
  "gullible",
  "attract",
  "precede",
  "wrap",
  "mammoth",
  "dad",
  "carpenter",
  "statuesque",
  "parallel",
  "mess up",
  "therapeutic",
  "trains",
  "toes",
  "reading",
  "ignorant",
  "chubby",
  "glib",
  "eyes",
  "old",
  "cultured",
  "cooperative",
  "broken",
  "mist",
  "teeny",
  "snake",
  "depressed",
  "irritating",
  "helpful",
  "reason",
  "suggest",
  "lip",
  "x-ray",
  "cat",
  "order",
  "annoyed",
  "tire",
  "alleged",
  "amazing",
  "flow",
  "automatic",
  "argue",
  "meek",
  "books",
  "partner",
  "thunder",
  "water",
  "potato",
  "rest",
  "bewildered",
  "channel",
  "exclusive",
  "useful",
  "noisy",
  "doubtful",
  "record",
  "strap",
  "outgoing",
  "squalid",
  "excited",
  "rod",
  "selfish",
  "miniature",
  "material",
  "dogs",
  "calm",
  "enormous",
  "spooky",
  "load",
  "poised",
  "unarmed",
  "haircut",
  "efficient",
  "field",
  "defeated",
  "ink",
  "boy",
  "nebulous",
  "cactus",
  "heat",
  "wealthy",
  "vessel",
  "three",
  "man",
  "poor",
  "boring",
  "shoes",
  "linen",
  "mask",
  "dime",
  "naughty",
  "dinner",
  "lumpy",
  "green",
  "craven",
  "float",
  "grieving",
  "wistful",
  "second",
  "rampant",
  "picayune",
  "word",
  "hook",
  "maddening",
  "nervous",
  "song",
  "harsh",
  "intend",
  "succeed",
  "protective",
  "shape",
  "rice",
  "omniscient",
  "base",
  "sassy",
  "home",
  "country",
  "hop",
  "ban",
  "yak",
  "scientific",
  "suppose",
  "empty",
  "island",
  "please",
  "coal",
  "embarrassed",
  "ship",
  "bead",
  "bolt",
  "skillful",
  "own",
  "actor",
  "plants",
  "humorous",
  "roof",
  "decorate",
  "bit",
  "deafening",
  "tangy",
  "touch",
  "texture",
  "different",
  "spotty",
  "answer",
  "flock",
  "roasted",
  "panoramic",
  "income",
  "teeny-tiny",
  "book",
  "cause",
  "tendency",
  "secretary",
  "balance",
  "lighten",
  "wreck",
  "outrageous",
  "wild",
  "bustling",
  "bear",
  "sponge",
  "creature",
  "acidic",
  "spare",
  "wandering",
  "wacky",
  "chilly",
  "bite-sized",
  "hard",
  "long",
  "fire",
  "lopsided",
  "yummy",
  "bait",
  "cart",
  "female",
  "annoying",
  "murder",
  "curly",
  "eggs",
  "accurate",
  "teaching",
  "horn",
  "talented",
  "steam",
  "small",
  "town",
  "offer",
  "quince",
  "bless",
  "clever",
  "melt",
  "wool",
  "short",
  "slimy",
  "son",
  "successful",
  "upbeat",
  "normal",
  "scarce",
  "guide",
  "private",
  "peep",
  "end",
  "wealth",
  "detail",
  "tight",
  "high-pitched",
  "enter",
  "religion",
  "powerful",
  "petite",
  "hospitable",
  "planes",
  "houses",
  "fearless",
  "stretch",
  "imaginary",
  "pig",
  "full",
  "wiry",
  "wall",
  "square",
  "key",
  "unhealthy",
  "rotten",
  "scatter",
];
