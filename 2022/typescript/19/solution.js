"use strict";exports.__esModule=!0;var fs=require("fs"),log=console.log,blueprints=fs.readFileSync("./input.ext","utf-8").split("\r\n").map((function(o){var t=/Blueprint (\d+): Each ore robot costs (\d+) ore. Each clay robot costs (\d+) ore. Each obsidian robot costs (\d+) ore and (\d+) clay. Each geode robot costs (\d+) ore and (\d+) obsidian./.exec(o);return{id:Number(t[1]),oreRobotCost:{ore:Number(t[2])},clayRobotCost:{ore:Number(t[3])},obsidianRobotCost:{ore:Number(t[4]),clay:Number(t[5])},geodeRobotCost:{ore:Number(t[6]),obsidian:Number(t[7])}}})),cache={},runBlueprint=function(o,t,e,r,i,n,a,s,c,b){if(t<=0)return n;var u=Math.max.apply(Math,[o.oreRobotCost.ore,o.clayRobotCost.ore,o.obsidianRobotCost.ore,o.geodeRobotCost.ore]);a>=u&&(a=u),s>=o.obsidianRobotCost.clay&&(s=o.obsidianRobotCost.clay),c>=o.geodeRobotCost.obsidian&&(c=o.geodeRobotCost.obsidian);var l=t*u-a*(t-1),d=t*o.obsidianRobotCost.clay-s*(t-1),C=t*o.geodeRobotCost.obsidian-c*(t-1);e>=l&&(e=l),r>=d&&(r=d),i>=C&&(i=C);var R="".concat(o.id,"|").concat(t,"|").concat(e,"|").concat(r,"|").concat(i,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(c,"|").concat(b);if(Object.keys(cache).length%1e3==0&&log(R,n,Object.keys(cache).length),void 0!==cache[R])return cache[R];cache[R]=n;var p,y=0,g=e>=o.oreRobotCost.ore,h=e>=o.clayRobotCost.ore,m=e>=o.obsidianRobotCost.ore&&r>=o.obsidianRobotCost.clay,f=e>=o.geodeRobotCost.ore&&i>=o.geodeRobotCost.obsidian;g&&h&&m&&f||(y=(p=runBlueprint(o,t-1,e+a,r+s,i+c,n+b,a,s,c,b))>y?p:y);f&&(y=(p=runBlueprint(o,t-1,e-o.geodeRobotCost.ore+a,r+s,i-o.geodeRobotCost.obsidian+c,n+b,a,s,c,b+1))>y?p:y);m&&(y=(p=runBlueprint(o,t-1,e-o.obsidianRobotCost.ore+a,r-o.obsidianRobotCost.clay+s,i+c,n+b,a,s,c+1,b))>y?p:y);h&&(y=(p=runBlueprint(o,t-1,e-o.clayRobotCost.ore+a,r+s,i+c,n+b,a,s+1,c,b))>y?p:y);g&&(y=(p=runBlueprint(o,t-1,e-o.oreRobotCost.ore+a,r+s,i+c,n+b,a+1,s,c,b))>y?p:y);return y},t=Date.now(),blueprintQualities=blueprints.map((function(o){return runBlueprint(o,24,0,0,0,0,1,0,0,0)*o.id})),blueprintsQuality=blueprintQualities.reduce((function(o,t){return o+t}),0),blueprintsQualityTimeMs=Date.now()-t;log(blueprintQualities),console.log("Part One",blueprintsQuality,"took ".concat(blueprintsQualityTimeMs,"ms"));